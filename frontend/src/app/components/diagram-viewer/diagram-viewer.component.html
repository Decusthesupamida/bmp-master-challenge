<ng-container *ngIf="diagram; else noData">
  <div class="diagram-view-container" aria-label="Diagram details and visualization">
    <mat-card class="info-card" aria-label="Nodes list">
      <mat-card-header>
        <mat-card-title>Nodes ({{ diagram.nodes.length || 0 }})</mat-card-title>
      </mat-card-header>
      <mat-card-content class="list-content">
        <mat-list>
          @for (n of diagram.nodes; track trackNode) {
            <mat-list-item>
              <mat-icon class="node-point" matListItemIcon color="primary">lens</mat-icon>
              <div matListItemTitle>{{ n.id }} — {{ n.name }} ( {{ n.type }} )</div>
            </mat-list-item>
          }
        </mat-list>
      </mat-card-content>
    </mat-card>

    <mat-card class="info-card" aria-label="Edges list">
      <mat-card-header>
        <mat-card-title>Edges ({{ diagram.edges.length || 0 }})</mat-card-title>
      </mat-card-header>
      <mat-card-content class="list-content">
        <mat-list>
          @for (e of diagram.edges; track trackEdge) {
            <mat-list-item>
              <div matListItemTitle>{{ e.from }} → {{ e.to }}</div>
            </mat-list-item>
          }
        </mat-list>
      </mat-card-content>
    </mat-card>

    <mat-card class="graph-card" aria-label="Graph visualization">
      <mat-card-header>
        <mat-card-title>Graph Visualization</mat-card-title>
      </mat-card-header>
      <mat-card-content class="graph-wrapper">
        <ngx-graph
          [nodes]="nodes"
          [links]="links"
          [layout]="'dagre'"
          [autoZoom]="true"
          [autoCenter]="true"
        >
        </ngx-graph>
      </mat-card-content>
    </mat-card>
  </div>
</ng-container>

<ng-template #noData>
  <div class="empty-state">
    <mat-icon class="empty-state__icon">search_off</mat-icon>
    <h2 class="empty-state__title">No Diagram Data Available</h2>
    <p class="empty-state__text">The diagram data is missing or has not been loaded yet.</p>
  </div>
</ng-template>
